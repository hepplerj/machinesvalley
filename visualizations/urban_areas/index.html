---
title: Urban Areas of the San Francisco Peninsula
date: 2014-09-10
permalink: /visualizations/urban_areas/
layout: visualization
---

<style>

svg {
  background: #7EC9C8;
  font-family: "Lato", sans-serif;
}

path { fill: #fee6ce; }

.city-label {
  fill: #333;
  font-size: 12px;
  font-weight: 300;
  text-anchor: middle;
}

.subunit081 { fill: rgb(239,235,228); } /*#D2DDCC; }*/
.subunit075 { fill: rgb(239,235,228); } /*#dcd; }*/
.subunit085 { fill: rgb(239,235,228); } /*#cdd; }*/
.subunit087 { fill: rgb(239,235,228); } /*#DDCCDD; }*/
.subunit001 { fill: rgb(239,235,228); } /*#fde0dd; }*/

.subunit-boundary {
  fill: none;
  stroke: #777;
  stroke-dasharray: 2,2;
  stroke-linejoin: round;
}

.subunit-label {
  fill: #777;
  fill-opacity: .5;
  font-size: 20px;
  font-weight: 300;
  text-anchor: middle;
}
</style>

<h2>{{ page.title }}</h2>

<div id="map"></div>

  <div class="row">
    <div class="col-md-8">

      <h3>About the Map</h3>

      <p>
      After World War II, every municipality in the Bay Area underwent
      aggressive expansion. Annexations, incorporations, and consolidations
      sprawled throughout the Santa Clara Valley. The visualization above
      shows the current urban areas on the San Francisco Peninsula. The highlighted     urban boundaries are the focus of this research project.
      </p>

      <h3>Citation</h3>
      <blockquote>
      Jason A. Heppler, "{{ page.title}}," interactive map,
      {{site.url}}{{page.permalink}}, 2018.
      </blockquote>
    </div>

    <div class="col-md-4 sidebar">
    </div>
  </div>

<script>

queue()
  .defer(d3.json, "/data-files/ca-counties/ca_counties.json")
  .defer(d3.json, "/data-files/sv-urban/urban_areas_out.json")
  .await(ready);

var width = 890,
    height = 400,
    margin = {left: 50, right: 50, bottom: 50, top: 50};

var color = d3.scale.category20();

var projection = d3.geo.albers()
    .center([0, 37.43])
    .rotate([122.1, 0])
    .parallels([50, 60])
    .scale(1200 * 55)
    .translate([width / 2, height / 2]);

var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("#map").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom);

function ready(error, ca_counties, urban_areas) {
  if (error) return console.error(error);

  svg.selectAll(".subunit")
    .data(topojson.feature(ca_counties, ca_counties.objects.subunits).features)
  .enter().append("path")
    .attr("class", function(d) { return "subunit" + d.id; })
    .attr("d", path);

  svg.append("path")
    .datum(topojson.mesh(ca_counties, ca_counties.objects.subunits, function(a, b) { return a !== b }))
    .attr("d", path)
    .attr("class", "subunit-boundary");

  svg.selectAll(".urban_areas")
      .data(topojson.feature(urban_areas, urban_areas.objects.urban_areas).features)
    .enter().append("path")
      .style("fill", "#BFB7A8") //function(d,i) { return color(d.id); })
      .style("stroke", "rgb(239,235,228)") // function(d,i) { return d3.lab(color(d.id)).darker(); })
      .attr("d", path)
      .style("opacity", "0.3")
      .filter(function(cities) {
		return cities.properties.name == "San Jose" ||
			   cities.properties.name == "Palo Alto" ||
			   cities.properties.name == "Mountain View" ||
			   cities.properties.name == "Los Altos Hills" ||
			   cities.properties.name == "East Palo Alto" ||
			   cities.properties.name == "Sunnyvale" ||
			   cities.properties.name == "Stanford" ||
			   cities.properties.name == "Santa Clara";
 	  })
      .style("fill", function(d,i) { return color(d.id); })
      .style("stroke", function(d,i) { return d3.lab(color(d.id)).darker(); })
      .style("stroke-width", 3);

  svg.selectAll(".city-label")
      .data(topojson.feature(urban_areas, urban_areas.objects.urban_areas).features)
    .enter().append("text")
      .attr("class", function(d) { return "city-label " + d.id; })
      .attr("transform", function(d) { return "translate(" + path.centroid(d) + ")"; })
      .attr("dy", ".35em")
      .text(function(d) { return d.properties.name; })
	  .filter(function(labels) {
			return labels.properties.name == "Emerald Lake Hills" ||
				   labels.properties.name == "North Fair Oaks" ||
				   labels.properties.name == "Ladera" ||
				   labels.properties.name == "Portola Valley" ||
				   labels.properties.name == "Los Altos" ||
				   labels.properties.name == "Loyola" ||
				   labels.properties.name == "Alum Rock" ||
				   labels.properties.name == "West Menlo Park" ||
				   labels.properties.name == "Woodside" ||
				   labels.properties.name == "Menlo Park" ||
				   labels.properties.name == "Monte Sereno" ||
				   labels.properties.name == "Foster City" ||
				   labels.properties.name == "Hillsborough" ||
				   labels.properties.name == "Highlands-Baywood Park" ||
				   labels.properties.name == "Moss Beach" ||
				   labels.properties.name == "Cambrian Park" ||
				   labels.properties.name == "Burbank" ||
				   labels.properties.name == "Fruitdale" ||
				   labels.properties.name == "East Foothills";
		})
	  .style("opacity", 0);

};

</script>
